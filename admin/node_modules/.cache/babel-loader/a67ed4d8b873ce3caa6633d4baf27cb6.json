{"ast":null,"code":"import _regeneratorRuntime from\"/media/vaseem/62A4C6B9A4C68ECB/projects/selecta/selecta/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/media/vaseem/62A4C6B9A4C68ECB/projects/selecta/selecta/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/media/vaseem/62A4C6B9A4C68ECB/projects/selecta/selecta/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/media/vaseem/62A4C6B9A4C68ECB/projects/selecta/selecta/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/media/vaseem/62A4C6B9A4C68ECB/projects/selecta/selecta/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import React,{useState}from'react';import{useDispatch}from'react-redux';import apiPath from\"../../common/helpers/apiPath\";import Helper from\"../../common/helpers/Helper\";import{useSession}from\"react-use-session\";var Login=function Login(){var _useSession=useSession(\"selecta\"),session=_useSession.session,saveJWT=_useSession.saveJWT;var dispatch=useDispatch();var _useState=useState({userName:'',password:''}),_useState2=_slicedToArray(_useState,2),loginCre=_useState2[0],setLoginCre=_useState2[1];var onHandleChange=function onHandleChange(e){setLoginCre(_objectSpread(_objectSpread({},loginCre),{},_defineProperty({},e.target.name,e.target.value)));};function validate(_x){return _validate.apply(this,arguments);}function _validate(){_validate=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var postjson,path,fr,response,token;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();postjson={username:loginCre.userName,password:loginCre.password};path=apiPath.login;_context.next=5;return Helper.post(postjson,path);case 5:fr=_context.sent;_context.next=8;return fr.response.json();case 8:response=_context.sent;console.log('this is response',response);if(response.status===200){;token=response.result.token;saveJWT(token);localStorage.setItem(\"loginData\",JSON.stringify({username:response.result.loginData.username}));Helper.toaster(response.msg,'success');}else{Helper.toaster(response.msg,'error');}//dispatch(validateLogin({user_name: loginCre.userName, password: loginCre.password}));\ncase 11:case\"end\":return _context.stop();}}},_callee);}));return _validate.apply(this,arguments);}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"lgW d-none\",children:\"Welcome To Selecta\"}),/*#__PURE__*/_jsx(\"div\",{className:\" lgWC\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-xl-7 col-lg-8 col-md-12 col-12 p-5 border bg-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header card-header-primary\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"card-title\",children:\"Login\"}),/*#__PURE__*/_jsx(\"p\",{className:\"card-category\",children:\"Enter Name and Password\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:validate,children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"bmd-label-floating\",children:\"User Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:loginCre.userName,onChange:onHandleChange,name:\"userName\",className:\"form-control\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"bmd-label-floating\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:loginCre.password,onChange:onHandleChange,name:\"password\",className:\"form-control\"})]})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary pull-right\",children:\"Login\"}),/*#__PURE__*/_jsx(\"div\",{className:\"clearfix\"})]})})]})})})]});};export default Login;","map":{"version":3,"sources":["/media/vaseem/62A4C6B9A4C68ECB/projects/selecta/selecta/admin/src/Component/Account/Login.tsx"],"names":["React","useState","useDispatch","apiPath","Helper","useSession","Login","session","saveJWT","dispatch","userName","password","loginCre","setLoginCre","onHandleChange","e","target","name","value","validate","preventDefault","postjson","username","path","login","post","fr","response","json","console","log","status","token","result","localStorage","setItem","JSON","stringify","loginData","toaster","msg"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport apiPath from \"../../common/helpers/apiPath\";\nimport Helper from \"../../common/helpers/Helper\";\nimport { useSession } from \"react-use-session\";\n\n\n\n\nconst Login = () => {\n  const { session, saveJWT } = useSession(\"selecta\");\n  const dispatch = useDispatch();\n  const [loginCre, setLoginCre] = useState({\n    userName: '',\n    password: ''\n  });\n  const onHandleChange = (e: any) => {\n    setLoginCre({ ...loginCre, [e.target.name]: e.target.value });\n  }\n  async function validate(e: any){\n    e.preventDefault();\n    let postjson = { username: loginCre.userName, password: loginCre.password };\n    let path = apiPath.login;\n    const fr = await Helper.post(postjson, path);\n    const response = await fr.response.json();\n    console.log('this is response', response);\n    if(response.status===200) {;\n      const token: string = response.result.token;\n      saveJWT(token);\n      localStorage.setItem(\"loginData\", JSON.stringify({username: response.result.loginData.username}));\n      Helper.toaster(response.msg, 'success')\n    } else {\n      Helper.toaster(response.msg, 'error');\n    }\n    //dispatch(validateLogin({user_name: loginCre.userName, password: loginCre.password}));\n  }\n  return (\n    <>\n      <div className=\"lgW d-none\">Welcome To Selecta</div>\n      <div className=\" lgWC\">\n        <div className=\"col-xl-7 col-lg-8 col-md-12 col-12 p-5 border bg-white\">\n          <div className=\"card\">\n            <div className=\"card-header card-header-primary\">\n              <h4 className=\"card-title\">Login</h4>\n              <p className=\"card-category\">Enter Name and Password</p>\n            </div>\n            <div className=\"card-body\">\n              <form onSubmit={validate}>\n                <div className=\"col-12\">\n                  <div className=\"form-group\">\n                    <label className=\"bmd-label-floating\">User Name</label>\n                    <input type=\"text\" value={loginCre.userName} onChange={onHandleChange} name=\"userName\" className=\"form-control\" />\n                  </div>\n                </div>\n                <div className=\"col-12\">\n                  <div className=\"form-group\">\n                    <label className=\"bmd-label-floating\">Password</label>\n                    <input type=\"password\" value={loginCre.password} onChange={onHandleChange} name=\"password\" className=\"form-control\" />\n                  </div>\n                </div>\n\n                <button type=\"submit\" className=\"btn btn-primary pull-right\">Login</button>\n                <div className=\"clearfix\"></div>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}